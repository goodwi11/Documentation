===================
WordPress Generator
===================

Обзор
=====

**WordPress Generator** - это классический генератор многостраничных новостных блогов на основе шаблонов СMS WordPress и контент модуля, разработанного нашей командой и позволяющий подбирать наиболее релевантный и трастовый контент на каждую генерацию. Помимо этого, структура вайта собирается специальным алгоритмом, который обходит все известные триггеры модерации рекламных сетей.

Дополнительный траст вайтам созданным при помощи этого генератора, является тот факт, что сайты на базе СMS WordPress широко распространены как на просторах интернета, так и в других рекламных кампаниях, таким образом HTML-код вайтов оказывается неотличим от кода сотен тысяч настоящих сайтов.
Рекламным площадкам, таким как Google или Meta, сложно отличить вайт от обычного сайта созданного на основе этой CMS от общей массы WordPress-сайтов, даже при помощи машинного обучения. Этот факт в купе с остальными технологиями  гарантирует высокую проходимость при модерации рекламных кампаний.

WordPress PHP
=============

WordPress PHP версия отличается от WordPress HTML наличием полноценной эмуляции движка WordPress, а также эмуляцией базы данных и панели администратора.
Это модифицированная версия СMS WordPress, которая не требует установки на сервер или хостинг, а также работы с базой данных. Только лишь строгое соответствие системным требованиям, с которыми можно ознакомиться ниже.

Системные требования для работы с WordPress PHP
-----------------------------------------------

* Версия **PHP** должна быть не выше, чем 7.4 или 7.4.X.

* Установленный **NGINX** или **Apache** с модулем "mod_rewrite" (при использовании Apache, рекомендуется перевести PHP в режим FastCGI).

* Установленное расширение **PHP Data Objects (PDO)**.

* Установленный драйвер **PDO_SQLITE**.

.. attention::

 Файлы PHP вайта необходимо загружать на сервер или хостинг, только через FTP-клиент и размещать в корневой папке.

Возможные ошибки и их решения
-----------------------------

| 1. **There has been a critical error on this website** - данная ошибка свидетельствует лишь о том, что сервер или хостинг не соответствует системным требованиям и требованиям по размещению файлов. Дополнительно проверьте все настройки или обратитесь в службу поддержки вашего сервера или хостинга, чтобы вам могли точно адаптировать конфигурацию под наши требования.

| 2. **Error establishing a database connection (данная ошибка не исключает проблем с системными требованиями).** 
| При получении данной ошибки необходимо проверить следующее:

| `В zip файле -> /wp-include/version.php -> $wp_db_version = 51917`
| `В cpanel -> phpmyadmin -> table wp_options -> db_version`

| `В zip файле -> /wp-include/version.php -> $wp_version = 6.0`
| `В cpanel -> phpmyadmin -> table wp_options -> wp_version`

Версии в файлах вайта и на вашем сервере/хостинге должны совпадать.
Если проблема останется или будет получена другая ошибка, то необходимо проверить сервер или хостинг на соответствие системным требованиям.

WordPress CMS
=============

Данная версия WordPress генератора представляет собой полноценную версию CMS системы включающую в себя все её возможности, используя в качестве базы данных MySQL. Версия поддерживает установку кастомных тем и плагинов, позволяя гибко расширять функциональность и настраивать внешний вид вайта.

Системные требования для работы с WordPress CMS
-----------------------------------------------

* Версия **PHP** должна быть равна 7.4, 7.4.X. или выше.

* База данных **MySQl** версии 5.7 или выше, либо база данных **MariaDB** версии 10.3 или выше.

* Активный протокол **HTPPS** (SSL или TLS сертификат)

* Активные **PHP расширения** MySQLi, curl, GD или ImageMagick, Multibyte String, JSON, XML.

* Размер **memory_limit** для PHP должен быть 64 Мбайт или больше.

Данные для входа в панель администратора
----------------------------------------

.. csv-table:: 
   :header: "Поле", "Значение"
   :width: 10%
   :align: center

   "**User**", `admin`
   "**Password**", `0!1#EHxp&K5{x9$%`
   "**Email**", `admin@wordpress.com`

При необходимости вы можете заменить данные для входа в панель адмнистратора используя команду ниже:
::
 wp user --path="${SITE_PATH}" update 1 --user_login=new_login
 wp user --path="${SITE_PATH}" update admin --user_email=new@email.com
 wp user --path="${SITE_PATH}" update admin --user_pass=new_password

.. note::
 `${SITE_PATH}` - путь где находится файл с WordPress. Например: /way/to/wordpress/folder

Инструкция по размещению и активации WordPress CMS на сервере через SSH протокол
--------------------------------------------------------------------------------

**Шаг 1.** Установите инструмент wp_cli для корректной работы WordPress:
::
 curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar
 php wp-cli.phar --info
 chmod +x wp-cli.phar
 sudo mv wp-cli.phar /usr/local/bin/wp

**1.1.** Установите остальные библиотеки модули для корректной работы WordPress:
::
 sudo apt update
 sudo apt install unzip
 sudo apt install php-fpm php-mysql php-curl -y
 sudo apt install mysql-server
 sudo systemctl enable mysql
 sudo systemctl start mysql

.. note::
 Вместо MySQL Server может быть использована другая база данных: MySQL, Percona или MariaDB.

**Шаг 2.** Необходимо настроить NGINX, OpenResty или Apache на вашем сервере.

.. note::
 | Замените ${} на соответствующие данные.
 | `${SITE_PORT}` - порт где будет размещён ваш домен. Например: 80
 | `${WP_PORT}` - порт где будет размещён WordPress. Например: 8080
 | `${SITE_PATH}` - путь где находится файл с WordPress. Например: /way/to/wordpress/folder
 | `${SITE_URL}` - URL домена, где будет размещён WordPress. Например: https://example.com
 | `${SQL_FILE}` - имя файла дампа базы данных из архива WordPress. Например: db.sql

Пример конфигурации веб-сервера NGINX:
::
   server {
    listen ${SITE_PORT};
    server_name example.com www.example.com;

    location / {
        proxy_pass http://127.0.0.1:${WP_PORT};
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg|woff2?|ttf|eot)$ 
     { 
    root ${SITE_PATH};
        expires 30d;
        access_log off;
     }
   }

**Шаг 3.** Разархивируйте папку с WordPress вайтом.

Распаковка в текущую папку:
::
 unzip archive.zip

Распаковка в указанную директорию:
::
 unzip archive.zip -d /way/to/folder

**Шаг 4.** Скачайте и активируйте файл :download:`deploy.sh <../_static/deploy.sh>` для автоматической настройки:
::
 chmod +x deploy.sh
 ./deploy.sh

**Шаг 5.** Выполните команду для запуска *wp server*:
::
 wp server --path="${SITE_PATH}" --host=127.0.0.1 --port=${WP_PORT} --allow-root

Команды для ручной настройки WordPress:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Шаг 4.** Замените порт в dump на порт где будет запущен WordPress:
::
 sed -i -E "s#(http://[^:]+:)[0-9]+#\1${WP_PORT}#g" "${SQL_FILE}"

**Шаг 5.** Импортируйте *db.sql* и создайте *wpuser* в базе данных MySQL.

.. important::
  При переносе *db.sql* и создании *wpuser* не забудьте изменить параметры в MySQL (DB_NAME, DB_USER, DB_PASSWORD).

**Шаг 5.1.** Пропишите измененные данные в базе данных MySQL в файле *wp-config.php*.

**Шаг 6.** Для корректной работы *https* выполните замену пути к WordPress:
::
 wp search-replace "http://127.0.0.1:${WP_PORT}" "${SITE_URL}" --skip-columns=guid --path="${SITE_PATH}" --allow-root

**Шаг 7.** Выполните команду для запуска *wp server*:
::
 wp server --path="${SITE_PATH}" --host=127.0.0.1 --port=${WP_PORT} --allow-root

Как сгенерировать вайт
======================

**Шаг 1.** Выберите генератор **WordPress** на странице генерации и выберите тему из представленного списка в соответствующем поле "Тема", которая наиболее подходит под ваши ключевые слова или креатив.

| **Шаг 2.** Пропишите ключевые слова и доменное имя в соответствующие поля.
| Пример ключевых слов (прописывайте через запятую): `key, keyword1, keyword2`
| Пример доменного имени: `https://example.com` или `example.com`

| **Шаг 3.** Нажмите кнопку **«Сгенерировать»**, через некоторое время вам будет показан предпросмотр страницы. 
| `При желании вы можете сгенерировать вайт повторно, чтобы получить другой вариант дизайна и контента.`

**Шаг 4.** Нажмите кнопку **«Скачать»**, чтобы получить ZIP-архив с готовым вайтом.

**Шаг 5.** Распакуйте полученный ZIP-архив и разместите его на вашем сервере или хостинге.

